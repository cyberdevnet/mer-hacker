{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\frollo\\\\Desktop\\\\DevNet\\\\JavaScript\\\\React\\\\py_react\\\\src\\\\components\\\\Tools\\\\GetAllOrganizationSubnets.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { MDBDataTableV5 } from \"mdbreact\";\nimport Loader from \"react-loader-spinner\";\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nexport default function GetAllOrganizationSubnets(ac) {\n  const [showtable, setshowtable] = useState(false);\n  const [trigger, settrigger] = useState(false);\n  const [loading, setloading] = useState(false);\n  const [alert, setalert] = useState(false);\n  console.log(\"GetAllDevicesIP -> loading\", loading);\n  const APIbody = {\n    \"X-Cisco-Meraki-API-Key\": `${ac.dc.apiKey}`,\n    organizationId: `${ac.dc.organizationID}`,\n    networkId: `${ac.dc.networkID}`\n  };\n\n  const handleOrganizationSubnets = e => {\n    e.preventDefault();\n    settrigger(true);\n  };\n\n  useEffect(() => {\n    async function APIcall() {\n      try {\n        if (trigger === false) {\n          return;\n        }\n\n        setloading(true);\n        fetch(\"/allVlans\", {\n          method: [\"POST\"],\n          cache: \"no-cache\",\n          headers: {\n            content_type: \"application/json\"\n          },\n          body: JSON.stringify(APIbody)\n        }).then(response => {\n          return response.json;\n        });\n        fetch(\"/allVlans\").then(res => res.json()).then(allVlans => {\n          ac.dc.setallVlanList(allVlans.result);\n        }).then(() => setloading(false));\n      } catch (err) {\n        if (err) {\n          setalert(true);\n        }\n      }\n    }\n\n    APIcall();\n  }, [trigger]);\n\n  const handleResults = e => {\n    let Vlanobjects = {};\n    let Nameobjects = {};\n\n    for (var x = 0; x < ac.dc.allVlanList.length; x++) {\n      Vlanobjects[x] = ac.dc.allVlanList[x].allVlans;\n      Nameobjects[x] = ac.dc.allVlanList[x].networkname;\n    }\n\n    const VLANS = Object.values(Vlanobjects); // const NAMES = Object.values(Nameobjects);\n\n    let row = [];\n    VLANS.map(item => {\n      row.push(...item);\n    });\n    let row2 = [];\n    row.map(item => {\n      var rowModel = [{\n        Subnet: item.subnet,\n        VlanID: item.id,\n        VlanName: item.name,\n        MX_IP: item.applianceIp,\n        DNS: item.dnsNameservers,\n        Network: \"Fake Network\"\n      }];\n      row2.push(...rowModel);\n      ac.dc.setmapRows(row2);\n    }); // let NameRow = [];\n    // NAMES.map((item) => {\n    //   var nameModel = [\n    //     {\n    //       Network: item,\n    //     },\n    //   ];\n    //   NameRow.push(...nameModel);\n    // });\n    // ac.dc.mapRows.push(...NameRow);\n    // console.log(\"handleOrganizationSubnets -> NameRow\", NameRow);\n\n    setshowtable(true);\n  };\n\n  const datatable = {\n    columns: [{\n      label: \"Subnet\",\n      field: \"Subnet\",\n      width: 150,\n      attributes: {\n        \"aria-controls\": \"DataTable\",\n        \"aria-label\": \"Description\"\n      }\n    }, {\n      label: \"VLAN ID\",\n      field: \"VlanID\",\n      sort: \"asc\",\n      width: 270\n    }, {\n      label: \"VLAN Name\",\n      field: \"VlanName\",\n      sort: \"asc\",\n      width: 200\n    }, {\n      label: \"MX IP\",\n      field: \"MX_IP\",\n      sort: \"asc\",\n      width: 100\n    }, {\n      label: \"DNS Servers\",\n      field: \"DNS\",\n      sort: \"asc\",\n      width: 100\n    }, {\n      label: \"Network\",\n      field: \"Network\",\n      sort: \"asc\",\n      width: 100\n    }],\n    rows: ac.dc.mapRows\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    id: \"page-inner-main-templates\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-xs-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"panel panel-default\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"panel-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"panel panel-success\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"panel-heading\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 17\n    }\n  }, \"Description\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"panel-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 19\n    }\n  }, \"This scripts iterates through all networks in an organization and print all the subnets and VLANs associated with every organization. The script works only on MX and Z3 devices, does not work on VPN HUBs, the network must be reachable in the Meraki Dashboard.\")), /*#__PURE__*/React.createElement(\"button\", {\n    class: \"btn btn-primary\",\n    type: \"button\",\n    disabled: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    class: \"spinner-border spinner-border-sm\",\n    role: \"status\",\n    \"aria-hidden\": \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    class: \"sr-only\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 19\n    }\n  }, \"Loading...\")), /*#__PURE__*/React.createElement(\"button\", {\n    class: \"btn btn-primary\",\n    type: \"button\",\n    disabled: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    class: \"spinner-border spinner-border-sm\",\n    role: \"status\",\n    \"aria-hidden\": \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 19\n    }\n  }), \"Loading...\"), /*#__PURE__*/React.createElement(\"a\", {\n    href: \"#null\",\n    className: \"btn btn-primary\",\n    onClick: handleOrganizationSubnets,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 17\n    }\n  }, \"RUN\"), /*#__PURE__*/React.createElement(\"a\", {\n    href: \"#null\",\n    className: \"btn btn-primary\",\n    onClick: handleResults,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 17\n    }\n  }, \"Show results\")))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-xs-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"panel panel-default\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Loader, {\n    visible: loading,\n    type: \"ThreeDots\",\n    color: \"#00BFFF\",\n    height: 100,\n    width: 100,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 13\n    }\n  }), showtable ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"panel-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(MDBDataTableV5, {\n    hover: true,\n    entriesOptions: [10, 25, 50, 100],\n    entries: 10,\n    pagesAmount: 10,\n    data: datatable,\n    pagingTop: true,\n    searchTop: true,\n    searchBottom: false,\n    exportToCSV: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 17\n    }\n  })) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 15\n    }\n  })))));\n}","map":{"version":3,"sources":["C:/Users/frollo/Desktop/DevNet/JavaScript/React/py_react/src/components/Tools/GetAllOrganizationSubnets.js"],"names":["React","useEffect","useState","MDBDataTableV5","Loader","GetAllOrganizationSubnets","ac","showtable","setshowtable","trigger","settrigger","loading","setloading","alert","setalert","console","log","APIbody","dc","apiKey","organizationId","organizationID","networkId","networkID","handleOrganizationSubnets","e","preventDefault","APIcall","fetch","method","cache","headers","content_type","body","JSON","stringify","then","response","json","res","allVlans","setallVlanList","result","err","handleResults","Vlanobjects","Nameobjects","x","allVlanList","length","networkname","VLANS","Object","values","row","map","item","push","row2","rowModel","Subnet","subnet","VlanID","id","VlanName","name","MX_IP","applianceIp","DNS","dnsNameservers","Network","setmapRows","datatable","columns","label","field","width","attributes","sort","rows","mapRows"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { MDBDataTableV5 } from \"mdbreact\";\r\nimport Loader from \"react-loader-spinner\";\r\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\r\n\r\nexport default function GetAllOrganizationSubnets(ac) {\r\n  const [showtable, setshowtable] = useState(false);\r\n  const [trigger, settrigger] = useState(false);\r\n  const [loading, setloading] = useState(false);\r\n  const [alert, setalert] = useState(false);\r\n  console.log(\"GetAllDevicesIP -> loading\", loading);\r\n\r\n  const APIbody = {\r\n    \"X-Cisco-Meraki-API-Key\": `${ac.dc.apiKey}`,\r\n    organizationId: `${ac.dc.organizationID}`,\r\n    networkId: `${ac.dc.networkID}`,\r\n  };\r\n\r\n  const handleOrganizationSubnets = (e) => {\r\n    e.preventDefault();\r\n    settrigger(true);\r\n  };\r\n\r\n  useEffect(() => {\r\n    async function APIcall() {\r\n      try {\r\n        if (trigger === false) {\r\n          return;\r\n        }\r\n        setloading(true);\r\n        fetch(\"/allVlans\", {\r\n          method: [\"POST\"],\r\n          cache: \"no-cache\",\r\n          headers: {\r\n            content_type: \"application/json\",\r\n          },\r\n          body: JSON.stringify(APIbody),\r\n        }).then((response) => {\r\n          return response.json;\r\n        });\r\n\r\n        fetch(\"/allVlans\")\r\n          .then((res) => res.json())\r\n          .then((allVlans) => {\r\n            ac.dc.setallVlanList(allVlans.result);\r\n          })\r\n          .then(() => setloading(false));\r\n      } catch (err) {\r\n        if (err) {\r\n          setalert(true);\r\n        }\r\n      }\r\n    }\r\n    APIcall();\r\n  }, [trigger]);\r\n\r\n  const handleResults = (e) => {\r\n    let Vlanobjects = {};\r\n    let Nameobjects = {};\r\n    for (var x = 0; x < ac.dc.allVlanList.length; x++) {\r\n      Vlanobjects[x] = ac.dc.allVlanList[x].allVlans;\r\n      Nameobjects[x] = ac.dc.allVlanList[x].networkname;\r\n    }\r\n    const VLANS = Object.values(Vlanobjects);\r\n    // const NAMES = Object.values(Nameobjects);\r\n\r\n    let row = [];\r\n    VLANS.map((item) => {\r\n      row.push(...item);\r\n    });\r\n\r\n    let row2 = [];\r\n\r\n    row.map((item) => {\r\n      var rowModel = [\r\n        {\r\n          Subnet: item.subnet,\r\n          VlanID: item.id,\r\n          VlanName: item.name,\r\n          MX_IP: item.applianceIp,\r\n          DNS: item.dnsNameservers,\r\n          Network: \"Fake Network\",\r\n        },\r\n      ];\r\n      row2.push(...rowModel);\r\n      ac.dc.setmapRows(row2);\r\n    });\r\n\r\n    // let NameRow = [];\r\n    // NAMES.map((item) => {\r\n    //   var nameModel = [\r\n    //     {\r\n    //       Network: item,\r\n    //     },\r\n    //   ];\r\n    //   NameRow.push(...nameModel);\r\n    // });\r\n\r\n    // ac.dc.mapRows.push(...NameRow);\r\n\r\n    // console.log(\"handleOrganizationSubnets -> NameRow\", NameRow);\r\n    setshowtable(true);\r\n  };\r\n\r\n  const datatable = {\r\n    columns: [\r\n      {\r\n        label: \"Subnet\",\r\n        field: \"Subnet\",\r\n        width: 150,\r\n        attributes: {\r\n          \"aria-controls\": \"DataTable\",\r\n          \"aria-label\": \"Description\",\r\n        },\r\n      },\r\n      {\r\n        label: \"VLAN ID\",\r\n        field: \"VlanID\",\r\n        sort: \"asc\",\r\n        width: 270,\r\n      },\r\n      {\r\n        label: \"VLAN Name\",\r\n        field: \"VlanName\",\r\n        sort: \"asc\",\r\n        width: 200,\r\n      },\r\n      {\r\n        label: \"MX IP\",\r\n        field: \"MX_IP\",\r\n        sort: \"asc\",\r\n        width: 100,\r\n      },\r\n      {\r\n        label: \"DNS Servers\",\r\n        field: \"DNS\",\r\n        sort: \"asc\",\r\n        width: 100,\r\n      },\r\n      {\r\n        label: \"Network\",\r\n        field: \"Network\",\r\n        sort: \"asc\",\r\n        width: 100,\r\n      },\r\n    ],\r\n    rows: ac.dc.mapRows,\r\n  };\r\n  return (\r\n    <div id=\"page-inner-main-templates\">\r\n      <div className=\"row\">\r\n        <div className=\"col-xs-12\">\r\n          <div className=\"panel panel-default\">\r\n            <div className=\"panel-body\">\r\n              <div className=\"panel panel-success\">\r\n                <div className=\"panel-heading\">Description</div>\r\n                <div className=\"panel-body\">\r\n                  <p>\r\n                    This scripts iterates through all networks in an\r\n                    organization and print all the subnets and VLANs associated\r\n                    with every organization. The script works only on MX and Z3\r\n                    devices, does not work on VPN HUBs, the network must be\r\n                    reachable in the Meraki Dashboard.\r\n                  </p>\r\n                </div>\r\n                <button class=\"btn btn-primary\" type=\"button\" disabled>\r\n                  <span\r\n                    class=\"spinner-border spinner-border-sm\"\r\n                    role=\"status\"\r\n                    aria-hidden=\"true\"\r\n                  ></span>\r\n                  <span class=\"sr-only\">Loading...</span>\r\n                </button>\r\n                <button class=\"btn btn-primary\" type=\"button\" disabled>\r\n                  <span\r\n                    class=\"spinner-border spinner-border-sm\"\r\n                    role=\"status\"\r\n                    aria-hidden=\"true\"\r\n                  ></span>\r\n                  Loading...\r\n                </button>\r\n                <a\r\n                  href=\"#null\"\r\n                  className=\"btn btn-primary\"\r\n                  onClick={handleOrganizationSubnets}\r\n                >\r\n                  RUN\r\n                </a>\r\n                <a\r\n                  href=\"#null\"\r\n                  className=\"btn btn-primary\"\r\n                  onClick={handleResults}\r\n                >\r\n                  Show results\r\n                </a>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"row\">\r\n        <div className=\"col-xs-12\">\r\n          <div className=\"panel panel-default\">\r\n            <Loader\r\n              visible={loading}\r\n              type=\"ThreeDots\"\r\n              color=\"#00BFFF\"\r\n              height={100}\r\n              width={100}\r\n            />\r\n            {showtable ? (\r\n              <div className=\"panel-body\">\r\n                <MDBDataTableV5\r\n                  hover\r\n                  entriesOptions={[10, 25, 50, 100]}\r\n                  entries={10}\r\n                  pagesAmount={10}\r\n                  data={datatable}\r\n                  pagingTop\r\n                  searchTop\r\n                  searchBottom={false}\r\n                  exportToCSV={true}\r\n                />\r\n              </div>\r\n            ) : (\r\n              <div></div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}