{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\frollo\\\\Desktop\\\\DevNet\\\\JavaScript\\\\React\\\\py_react\\\\src\\\\components\\\\Tools\\\\FindPorts.js\";\nimport React, { useEffect, useState, useRef } from \"react\";\nimport \"../../styles/FindPorts.css\";\nimport { data } from \"jquery\";\nexport default function NetworkTopUsers(ac) {\n  const [showtable, setshowtable] = useState(false);\n  const [showError, setshowError] = useState(false);\n  const [trigger, settrigger] = useState(0);\n  const [trigger2, settrigger2] = useState(0);\n  const [findPort, setfindPort] = useState([]);\n  const [findPortTable, setfindPortTable] = useState([]);\n  console.log(\"NetworkTopUsers -> findPort\", findPort);\n  const [errorMessage, seterrorMessage] = useState(null);\n  const [macAddressbeforeTransf, setmacAddressbeforeTransf] = useState(\"\"); // const APIbody2 = {\n  //   \"X-Cisco-Meraki-API-Key\": `${ac.dc.apiKey}`,\n  //   \"X-CSRFToken\": \"frollo\",\n  //   ORG_ID: `${ac.dc.organizationID}`,\n  //   MAC_ADDR: `${macAddress}`,\n  // };\n\n  const isFirstRun = useRef(true);\n  useEffect(() => {\n    if (isFirstRun.current) {\n      isFirstRun.current = false;\n      return;\n    }\n\n    async function APICallReports() {\n      if (ac.dc.isOrgSelected && ac.dc.isNetSelected === true) {\n        // VALIDATION FORM\n        const transormMacAddress = address => {\n          var a = address.replace(/\\W/g, \"\");\n\n          if (a.length === 12) {\n            seterrorMessage(null);\n            const macAddress = a.replace(/(.{2})/g, \"$1:\").toUpperCase().slice(0, -1);\n\n            try {\n              ac.dc.setloadingButton(true);\n              fetch(\"/find_ports\", {\n                method: [\"POST\"],\n                cache: \"no-cache\",\n                headers: {\n                  content_type: \"application/json\"\n                },\n                body: JSON.stringify({\n                  \"X-Cisco-Meraki-API-Key\": `${ac.dc.apiKey}`,\n                  \"X-CSRFToken\": \"frollo\",\n                  ORG_ID: `${ac.dc.organizationID}`,\n                  MAC_ADDR: macAddress\n                })\n              }).then(response => response.json()).then(data => setfindPort(data.data)).then(() => ac.dc.setloadingButton(false));\n            } catch (err) {\n              if (err) {\n                console.log(err);\n              }\n            }\n          } else {\n            seterrorMessage( /*#__PURE__*/React.createElement(\"div\", {\n              className: \"form-input-error-msg alert alert-danger\",\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 67,\n                columnNumber: 15\n              }\n            }, /*#__PURE__*/React.createElement(\"span\", {\n              className: \"glyphicon glyphicon-exclamation-sign\",\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 68,\n                columnNumber: 17\n              }\n            }), \"Please insert a valid MAC Address. Format accepted are: \\\"AA.BB.CC.DD.EE.FF\\\", \\\"112233445566\\\", \\\"AACC.DDEE.BBFF\\\", \\\"AA.BB.CC.DD.EE.FF\\\", \\\"AB12CD34EF56\\\", \\\"ab-12-cd-34-ef-56\\\", \\\"AB-12:CD-34:EF-56\\\", \\\"ab 12 cd 34 ef 56\\\", \\\"AB 12 CD 34 EF 56\\\",\"));\n          }\n        };\n\n        [macAddressbeforeTransf].forEach(transormMacAddress);\n      } else {\n        ac.dc.setswitchAlertModal(true);\n        ac.dc.setswitchToolsTemplate(false);\n      }\n    }\n\n    APICallReports();\n    return () => {\n      setfindPort([]);\n      setshowtable(false);\n    }; // eslint-disable-next-line\n  }, [trigger]);\n  const isFirstRunPort = useRef(true);\n  useEffect(() => {\n    if (isFirstRunPort.current) {\n      isFirstRunPort.current = false;\n      return;\n    }\n\n    if (findPort === null || findPort === undefined) {\n      console.log(\"Found 0 total ports matching search criteria.\");\n      setshowError(true);\n    } else {\n      setfindPortTable(findPort);\n      setshowtable(true);\n    }\n  }, [findPort]);\n\n  const handleTopUsers = e => {\n    e.preventDefault();\n    settrigger(trigger + 1);\n    settrigger2(trigger2 + 1);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    id: \"page-inner-main-templates\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-xs-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"panel panel-default\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"panel-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"panel-group\",\n    id: \"accordion\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"panel panel-default\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"panel-heading\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"panel-title-description\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    \"data-toggle\": \"collapse\",\n    \"data-parent\": \"#accordion\",\n    href: \"#collapseOne\",\n    className: \"collapsed\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 23\n    }\n  }, \"Description\"))), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"collapseOne\",\n    className: \"panel-collapse collapse\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"panel-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 21\n    }\n  }, \"This script finds all MS switchports that match the input search parameter, searching either by clients from a file listing MAC addresses (one per line), a specific tag in Dashboard currently applied to ports, or the specific access policy currently configured.\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"panel-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    className: \"form-inline\",\n    name: \"contentForm\",\n    method: \"\",\n    action: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    placeholder: \"MAC Address\",\n    onChange: e => setmacAddressbeforeTransf(e.target.value),\n    name: \"mac-address\",\n    id: \"mac-address\",\n    required: \"required\",\n    \"data-error\": \"Please enter a valid mac-address.\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 19\n    }\n  }), errorMessage && /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 36\n    }\n  }, errorMessage))), /*#__PURE__*/React.createElement(\"button\", {\n    id: \"runButton\",\n    type: \"submit\",\n    className: \"btn btn-primary\",\n    onClick: !ac.dc.loadingButton ? handleTopUsers : null,\n    disabled: ac.dc.loadingButton,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 15\n    }\n  }, ac.dc.loadingButton && /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fa fa-refresh fa-spin\",\n    style: {\n      marginRight: \"5px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 19\n    }\n  }), ac.dc.loadingButton && /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 41\n    }\n  }, \"Loading Data\"), !ac.dc.loadingButton && /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 42\n    }\n  }, \"RUN\")))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-xs-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"panel panel-default\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 11\n    }\n  }, showError ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"panel-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"table-responsive table-bordered\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 17\n    }\n  })) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 15\n    }\n  }), showtable ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"panel-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"table-responsive table-bordered\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    className: \"table\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 25\n    }\n  }, \"#\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 25\n    }\n  }, \"Switch\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 25\n    }\n  }, \"Port\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 25\n    }\n  }, \"IP Address\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 25\n    }\n  }, \"MAC Address\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 25\n    }\n  }, \"1\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 25\n    }\n  }, findPortTable[0]), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 25\n    }\n  }, findPortTable[1]), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 25\n    }\n  })))))) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 15\n    }\n  })))));\n}","map":{"version":3,"sources":["C:/Users/frollo/Desktop/DevNet/JavaScript/React/py_react/src/components/Tools/FindPorts.js"],"names":["React","useEffect","useState","useRef","data","NetworkTopUsers","ac","showtable","setshowtable","showError","setshowError","trigger","settrigger","trigger2","settrigger2","findPort","setfindPort","findPortTable","setfindPortTable","console","log","errorMessage","seterrorMessage","macAddressbeforeTransf","setmacAddressbeforeTransf","isFirstRun","current","APICallReports","dc","isOrgSelected","isNetSelected","transormMacAddress","address","a","replace","length","macAddress","toUpperCase","slice","setloadingButton","fetch","method","cache","headers","content_type","body","JSON","stringify","apiKey","ORG_ID","organizationID","MAC_ADDR","then","response","json","err","forEach","setswitchAlertModal","setswitchToolsTemplate","isFirstRunPort","undefined","handleTopUsers","e","preventDefault","target","value","loadingButton","marginRight"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\r\nimport \"../../styles/FindPorts.css\";\r\nimport { data } from \"jquery\";\r\n\r\nexport default function NetworkTopUsers(ac) {\r\n  const [showtable, setshowtable] = useState(false);\r\n  const [showError, setshowError] = useState(false);\r\n  const [trigger, settrigger] = useState(0);\r\n  const [trigger2, settrigger2] = useState(0);\r\n  const [findPort, setfindPort] = useState([]);\r\n  const [findPortTable, setfindPortTable] = useState([]);\r\n  console.log(\"NetworkTopUsers -> findPort\", findPort);\r\n  const [errorMessage, seterrorMessage] = useState(null);\r\n  const [macAddressbeforeTransf, setmacAddressbeforeTransf] = useState(\"\");\r\n\r\n  // const APIbody2 = {\r\n  //   \"X-Cisco-Meraki-API-Key\": `${ac.dc.apiKey}`,\r\n  //   \"X-CSRFToken\": \"frollo\",\r\n  //   ORG_ID: `${ac.dc.organizationID}`,\r\n  //   MAC_ADDR: `${macAddress}`,\r\n  // };\r\n\r\n  const isFirstRun = useRef(true);\r\n  useEffect(() => {\r\n    if (isFirstRun.current) {\r\n      isFirstRun.current = false;\r\n      return;\r\n    }\r\n    async function APICallReports() {\r\n      if (ac.dc.isOrgSelected && ac.dc.isNetSelected === true) {\r\n        // VALIDATION FORM\r\n        const transormMacAddress = (address) => {\r\n          var a = address.replace(/\\W/g, \"\");\r\n          if (a.length === 12) {\r\n            seterrorMessage(null);\r\n            const macAddress = a\r\n              .replace(/(.{2})/g, \"$1:\")\r\n              .toUpperCase()\r\n              .slice(0, -1);\r\n\r\n            try {\r\n              ac.dc.setloadingButton(true);\r\n\r\n              fetch(\"/find_ports\", {\r\n                method: [\"POST\"],\r\n                cache: \"no-cache\",\r\n                headers: {\r\n                  content_type: \"application/json\",\r\n                },\r\n                body: JSON.stringify({\r\n                  \"X-Cisco-Meraki-API-Key\": `${ac.dc.apiKey}`,\r\n                  \"X-CSRFToken\": \"frollo\",\r\n                  ORG_ID: `${ac.dc.organizationID}`,\r\n                  MAC_ADDR: macAddress,\r\n                }),\r\n              })\r\n                .then((response) => response.json())\r\n                .then((data) => setfindPort(data.data))\r\n                .then(() => ac.dc.setloadingButton(false));\r\n            } catch (err) {\r\n              if (err) {\r\n                console.log(err);\r\n              }\r\n            }\r\n          } else {\r\n            seterrorMessage(\r\n              <div className=\"form-input-error-msg alert alert-danger\">\r\n                <span className=\"glyphicon glyphicon-exclamation-sign\"></span>\r\n                Please insert a valid MAC Address. Format accepted are:\r\n                \"AA.BB.CC.DD.EE.FF\", \"112233445566\", \"AACC.DDEE.BBFF\",\r\n                \"AA.BB.CC.DD.EE.FF\", \"AB12CD34EF56\", \"ab-12-cd-34-ef-56\",\r\n                \"AB-12:CD-34:EF-56\", \"ab 12 cd 34 ef 56\", \"AB 12 CD 34 EF 56\",\r\n              </div>\r\n            );\r\n          }\r\n        };\r\n\r\n        [macAddressbeforeTransf].forEach(transormMacAddress);\r\n      } else {\r\n        ac.dc.setswitchAlertModal(true);\r\n        ac.dc.setswitchToolsTemplate(false);\r\n      }\r\n    }\r\n    APICallReports();\r\n    return () => {\r\n      setfindPort([]);\r\n      setshowtable(false);\r\n    };\r\n    // eslint-disable-next-line\r\n  }, [trigger]);\r\n\r\n  const isFirstRunPort = useRef(true);\r\n\r\n  useEffect(() => {\r\n    if (isFirstRunPort.current) {\r\n      isFirstRunPort.current = false;\r\n      return;\r\n    }\r\n    if (findPort === null || findPort === undefined) {\r\n      console.log(\"Found 0 total ports matching search criteria.\");\r\n      setshowError(true);\r\n    } else {\r\n      setfindPortTable(findPort);\r\n      setshowtable(true);\r\n    }\r\n  }, [findPort]);\r\n\r\n  const handleTopUsers = (e) => {\r\n    e.preventDefault();\r\n    settrigger(trigger + 1);\r\n    settrigger2(trigger2 + 1);\r\n  };\r\n\r\n  return (\r\n    <div id=\"page-inner-main-templates\">\r\n      <div className=\"row\">\r\n        <div className=\"col-xs-12\">\r\n          <div className=\"panel panel-default\">\r\n            <div className=\"panel-body\">\r\n              <div className=\"panel-group\" id=\"accordion\">\r\n                <div className=\"panel panel-default\">\r\n                  <div className=\"panel-heading\">\r\n                    <h4 className=\"panel-title-description\">\r\n                      <a\r\n                        data-toggle=\"collapse\"\r\n                        data-parent=\"#accordion\"\r\n                        href=\"#collapseOne\"\r\n                        className=\"collapsed\"\r\n                      >\r\n                        Description\r\n                      </a>\r\n                    </h4>\r\n                  </div>\r\n                  <div id=\"collapseOne\" className=\"panel-collapse collapse\">\r\n                    <div className=\"panel-body\">\r\n                      This script finds all MS switchports that match the input\r\n                      search parameter, searching either by clients from a file\r\n                      listing MAC addresses (one per line), a specific tag in\r\n                      Dashboard currently applied to ports, or the specific\r\n                      access policy currently configured.\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"d-flex\"></div>\r\n            </div>\r\n            <div className=\"panel-body\">\r\n              <div className=\"form-group\">\r\n                <form\r\n                  className=\"form-inline\"\r\n                  name=\"contentForm\"\r\n                  method=\"\"\r\n                  action=\"\"\r\n                >\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"form-control\"\r\n                    placeholder=\"MAC Address\"\r\n                    onChange={(e) => setmacAddressbeforeTransf(e.target.value)}\r\n                    name=\"mac-address\"\r\n                    id=\"mac-address\"\r\n                    required=\"required\"\r\n                    data-error=\"Please enter a valid mac-address.\"\r\n                  />\r\n\r\n                  {errorMessage && <span>{errorMessage}</span>}\r\n                </form>\r\n              </div>\r\n              <button\r\n                id=\"runButton\"\r\n                type=\"submit\"\r\n                className=\"btn btn-primary\"\r\n                onClick={!ac.dc.loadingButton ? handleTopUsers : null}\r\n                disabled={ac.dc.loadingButton}\r\n              >\r\n                {ac.dc.loadingButton && (\r\n                  <i\r\n                    className=\"fa fa-refresh fa-spin\"\r\n                    style={{ marginRight: \"5px\" }}\r\n                  />\r\n                )}\r\n                {ac.dc.loadingButton && <span>Loading Data</span>}\r\n                {!ac.dc.loadingButton && <span>RUN</span>}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"row\">\r\n        <div className=\"col-xs-12\">\r\n          <div className=\"panel panel-default\">\r\n            {showError ? (\r\n              <div className=\"panel-body\">\r\n                <div className=\"table-responsive table-bordered\"></div>\r\n              </div>\r\n            ) : (\r\n              <div></div>\r\n            )}\r\n\r\n            {showtable ? (\r\n              <div className=\"panel-body\">\r\n                <div className=\"table-responsive table-bordered\">\r\n                  <table className=\"table\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th>#</th>\r\n                        <th>Switch</th>\r\n                        <th>Port</th>\r\n                        <th>IP Address</th>\r\n                        <th>MAC Address</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      <tr>\r\n                        <td>1</td>\r\n\r\n                        <td>{findPortTable[0]}</td>\r\n                        <td>{findPortTable[1]}</td>\r\n                        <td></td>\r\n                        <td></td>\r\n                      </tr>\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <div></div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}